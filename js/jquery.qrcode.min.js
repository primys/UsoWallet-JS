(function(g){g.fn.qrcode=function(a){"string"===typeof a&&(a={text:a});a=g.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},a);return this.each(function(){if("canvas"==a.render){var b=new QRCode(a.typeNumber,a.correctLevel);b.addData(a.text);b.make();var e=document.createElement("canvas");e.width=a.width;e.height=a.height;for(var k=e.getContext("2d"),f=a.width/b.getModuleCount(),h=a.height/b.getModuleCount(),
d=0;d<b.getModuleCount();d++)for(var c=0;c<b.getModuleCount();c++)k.fillStyle=b.isDark(d,c)?a.foreground:a.background,k.fillRect(Math.round(c*f),Math.round(d*h),Math.ceil((c+1)*f)-Math.floor(c*f),Math.ceil((d+1)*f)-Math.floor(d*f));b=e}else{b=new QRCode(a.typeNumber,a.correctLevel);b.addData(a.text);b.make();e=g("<table></table>").css("width",a.width+"px").css("height",a.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",a.background);k=a.width/b.getModuleCount();
f=a.height/b.getModuleCount();for(h=0;h<b.getModuleCount();h++)for(d=g("<tr></tr>").css("height",f+"px").appendTo(e),c=0;c<b.getModuleCount();c++)g("<td></td>").css("width",k+"px").css("background-color",b.isDark(h,c)?a.foreground:a.background).appendTo(d);b=e}g(b).appendTo(this)})}})(jQuery);
